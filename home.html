{% extends 'base.html' %}{% block content %}
<div class="p-5 text-white rounded bg-hero mb-4">
  <div class="container">
    <h1 class="display-5">Smartmicro Finance</h1>
    <p class="lead">Empowering micro-entrepreneurs with fast, data-driven loan decisions.</p>
    <p><a class="btn btn-light btn-lg" href="/register/">Get Started</a></p>
  </div>
</div>

<div class="row">
  <div class="col-md-8">
    <h3>Recent Applications</h3>
    <ul class="list-group">
      {% for a in recent %}
      <li class="list-group-item d-flex justify-content-between align-items-start">
        <div>
          <strong>{{a.client}}</strong><div>Amount: {{a.amount}} | Status: {{a.status}}</div>
        </div>
        <small>{{a.submitted_at}}</small>
      </li>
      {% empty %}<li class="list-group-item">No recent applications</li>{% endfor %}
    </ul>
  </div>
  <div class="col-md-4">
    <h4>Platform Stats</h4>
    <canvas id="statsChart" width="300" height="200"></canvas>
    <p class="mt-3"><a class="btn btn-outline-primary" href="/apply/">Apply for Loan</a></p>
  </div>
</div>

<script>
const labels = ['Approved','Assessed','Rejected','Total'];
const data = [{{stats.approved}}, {{stats.assessed}}, {{stats.rejected}}, {{stats.total}}];
const ctx = document.getElementById('statsChart');
if (ctx) {
  new Chart(ctx, {type:'doughnut', data:{labels:labels, datasets:[{data:data}]}, options:{}});
}
</script>
{% endblock %}
